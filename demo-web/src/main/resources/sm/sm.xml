<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd">

  <bean id="beanNameUrlHandlerMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping">
    <property name="order" value="3" />
  </bean>

    <!-- 短信,邮件发送 -->
    <bean id="mailSmsRegister" class="cn.xyz.jt.altalanta.sm.MailSmsRegisterImpl"></bean>
    <bean name="/smRegister" class="org.springframework.remoting.caucho.HessianServiceExporter">
      <property name="service" ref="mailSmsRegister"></property>
      <property name="serviceInterface" value="cn.xyz.jt.altalanta.sm.MailSmsRegister"></property>
    </bean>

  <!-- 自定义的邮件发送器 -->
  <bean id="sessionMail" class="cn.xyz.jt.altalanta.sm.MailSenderByTemplateUtils">
    <property name="host" value="${mail.host}" />
    <property name="javaMailProperties">
      <props>
        <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
        <prop key="mail.transport.protocol">${mail.transport.protocol}</prop>
        <prop key="mail.username">${mail.username}</prop>
        <prop key="mail.password">${mail.password}</prop>
      </props>
    </property>
  </bean>

  <!-- spring自带的邮件发送器 -->
  <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="${mail.host}" />
    <property name="defaultEncoding" value="UTF-8"></property>
    <property name="javaMailProperties">
      <props>
        <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
        <prop key="mail.smtp.timeout">${mail.smtp.timeout}</prop>
      </props>
    </property>
    <property name="username" value="${mail.username}" />
    <property name="password" value="${mail.password}" />
  </bean>

  <bean id="mailSendUtil" class="cn.xyz.jt.altalanta.sm.MailSenderUtil">
    <property name="mailSender" ref="mailSender"></property>
  </bean>


    <!-- 邮件发送启动器 -->
    <bean id="mailSendStarter" class="cn.xyz.jt.altalanta.sm.MailSenderStarter" init-method="start" destroy-method="stop" >
      <property name="corePoolSize" value="30" />
    </bean>

    <!-- 短信发送启动器 -->
    <!--<bean id="smsSendStarter" class="com.focustech.ins.atalanta.sm.SmsSenderStarter" init-method="start" destroy-method="stop" >
      <property name="corePoolSize" value="30" />
    </bean>
    -->

  <bean id="jDomParse" class="cn.xyz.jt.utils.JDomParseUtils"
        init-method="initLoadXml" >
    <!--<property name="smsTemplate"  value="classpath:velocity/smsVelocity.xml"/>-->
    <property name="mailTemplate"  value="classpath:velocity/mailVelocity.xml"/>
  </bean>
</beans>