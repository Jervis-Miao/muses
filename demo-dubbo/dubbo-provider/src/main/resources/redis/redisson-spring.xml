<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:redisson="http://redisson.org/schema/redisson"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://redisson.org/schema/redisson
       http://redisson.org/schema/redisson/redisson.xsd
">
  <!-- 序列化方式定义, 序列化根据情况自行选择.部分序列化方式需要手动依赖序列化相关类库 -->
  <!-- fst 序列化方式-->
  <bean id="fstCodec" class="org.redisson.codec.FstCodec" />
  <!-- jdk 序列化方式-->
  <bean id="jdkCodec" class="org.redisson.codec.SerializationCodec"/>
  <!-- 单纯的针对 string 的序列化方式-->
  <bean id="stringCodec" class="org.redisson.client.codec.StringCodec" />
  <!-- redisson client 定义, 和 spring bean 一样,可以直接注入 -->
  <!-- codec-ref 是配置一种默认的序列化方式, client 使用的时候可以针对场景替换为其他方式 -->
  <redisson:client id="redissonClient" codec-ref="fstCodec" >
    <redisson:sentinel-servers
      master-name="${redis.sentinel.lowRel.masterName}"
      read-mode="MASTER"
      subscription-mode="MASTER"
      slave-connection-minimum-idle-size="${redis.sentinel.default.slaveConnectionMinimumIdleSize}"
      slave-connection-pool-size="${redis.sentinel.default.slaveConnectionPoolSize}"
      master-connection-minimum-idle-size="${redis.sentinel.default.masterConnectionMinimumIdleSize}"
      master-connection-pool-size="${redis.sentinel.default.masterConnectionPoolSize}"
      idle-connection-timeout="${redis.sentinel.default.idleConnectionTimeout}"
      connect-timeout="${redis.sentinel.default.connectTimeout}"
      timeout="${redis.sentinel.default.timeout}"
      retry-attempts="${redis.sentinel.default.retryAttempts}"
      retry-interval="${redis.sentinel.default.retryInterval}"
      failed-slave-reconnection-interval="${redis.sentinel.default.failedSlaveReconnectionInterval}"
      failed-slave-check-interval="${redis.sentinel.default.failedSlaveCheckInterval}"
      database="${redis.sentinel.default.database}"
      client-name="io-koni-basic"
    >
      <redisson:sentinel-address value="redis://${redis.sentinel.ser1.host}:${redis.sentinel.ser1.port}" />
      <redisson:sentinel-address value="redis://${redis.sentinel.ser2.host}:${redis.sentinel.ser2.port}" />
      <redisson:sentinel-address value="redis://${redis.sentinel.ser3.host}:${redis.sentinel.ser3.port}" />
    </redisson:sentinel-servers>
  </redisson:client>

</beans>